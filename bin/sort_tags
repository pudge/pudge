#!/usr/bin/perl
use warnings;
use strict;

print join "\n", sortfoo([<>]), "";

sub sortfoo {
    my($list) = @_;
    chomp @$list;
    
    map { $_->[0] }
    sort {
        my $arr = $a->[1];
        my $brr = $b->[1];
        my $cmp = 0;
        for my $i (0 .. $#{$arr}) {
            if ($arr->[$i] =~ /\D/ || $brr->[$i] =~ /\D/) {
                $cmp = $arr->[$i] cmp $brr->[$i];
                last if $cmp;
            }
            else {
                $cmp = $arr->[$i] <=> $brr->[$i];
                last if $cmp;
            }
        }
        return $cmp;
    }
    map {
        [ $_, [ my @a = split '_' ] ]
    } @$list;
}
